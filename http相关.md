### HTTP协议

- 超文本传输协议(HTTP）是一个简单的请求-响应协议，它通常运行在TCP之上。它指定了客户端可能发送给服务器什么样的消息以及得到什么样的响应。请求和响应消息的头以ASCII形式给出;而消息内容则具有一个类似MIME的格式。HTTP是万维网的数据通信的基础。
- HTTP是一个客户端终端和服务器端请求和应答的标准(TCP)。通过使用网页浏览器、网络爬虫或者其它的工具，客户端发起一个HTTP请求到服务器上指定端口（默认端口为80)。我们称这个客户端为用户代理程序。应答的服务器上存储着一些资源，比如HTML文件和图像。我们称这个应答服务器为源服务器。
- 以下是HTTP请求/响应的步骤:
  - 客户端连接到Web 服务器
    一个HTTP客户端，通常是浏览器，与Web服务器的HTTP端口（默认为80）建立一个TCP 套接字连接。例如，http://www.baidu.com。(URL)
  - 发送HTTP请求
    通过TCP套接字，客户端向Web服务器发送一个文本的请求报文，一个请求报文由请求行、请求头部、空行和请求数据4部分组成。
  - 服务器接受请求并返回HTTP响应
    Web服务器解析请求，定位请求资源。服务器将资源复本写到TCP套接字，由客户端读取。一个响应由状态行、响应头部、空行和响应数据4部分组成。
  - 释放连接TCP连接
    若connection模式为close，则服务器主动关闭TCP连接，客户端被动关闭连接，释放TCP连接;若connection模式为keep-alive，则该连接会保持一段时间，在该时间内可以继续接收请求;
  - 客户端浏览器解析HTML内容
    客户端浏览器首先解析状态行，查看表明请求是否成功的状态代码。然后解析每一个响应头，响应头告知以下为若干字节的HTML文档和文档的字符集。客户端浏览器读取响应数HTML，根据HTML的语法对其进行格式化，并在浏览器窗口中显示。
- 在浏览器地址栏键入URL，按下回车之后会经历以下流程:
    - 浏览器向DNS服务器请求解析该URL中的域名所对应的IP地址;
    - 解析出IP地址后，根据该IP地址和默认端口80，和服务器建立TCP连接;
    - 浏览器发出读取文件（URL中域名后面部分对应的文件）的HTTP请求，该请求报文作为TCP三次握手的第三个报文的数据发送给服务器;
    - 服务器对浏览器请求作出响应，并把对应的HTML文本发送给浏览器;
    - 释放TCP连接;
    - 浏览器将该HTML文本并显示内容。

- http请求报文格式：

![](https://github.com/XMULLT/IMG/raw/master/thread_img/http请求报文.jpg)

- http响应报文格式：

![](https://github.com/XMULLT/IMG/raw/master/thread_img/http响应报文.jpg)

- http请求方法：
  - GET:向指定的资源发出“显示"请求。使用GET方法应该只用在读取数据，而不应当被用于产生'′副作用"的操作中，例如在Web Application中。其中一个原因是GET可能会被网络蜘蛛等随意访问。
  - HEAD:与GET方法一样，都是向服务器发出指定资源的请求。只不过服务器将不传回资源的本文部分。它的好处在于，使用这个方法可以在不必传输全部内容的情况下，就可以获取其中“关于该资源的信息”(元信息或称元数据）。
  - POST:向指定资源提交数据，请求服务器进行处理（例如提交表单或者上传文件)。数据被包含在请求本文中。这个请求可能会创建新的资源或修改现有资源，或二者皆有。
  - PUT:向指定资源位置上传其最新内容。
  - DELETE:请求服务器删除Request-URI所标识的资源
  - TRACE:回显服务器收到的请求，主要用于测试或诊断。
  - OPTIONS:这个方法可使服务器传回该资源所支持的所有HTTP请求方法。用*'来代替资源名称，向Web服务器发送OPTIONS请求，可以测试服务器功能是否正常运作。
  - CONNECT: HTTP/1.1协议中预留给能够将连接改为管道方式的代理服务器。通常用于SSL加密服务器的链接（经由非加密的HTTP代理服务器）。
- http状态码：
  - 1xx消息——请求已被服务器接收，继续处理
  - 2xx成功―—请求已成功被服务器接收、理解、并接受
  - 3xx重定向——需要后续操作才能完成这一请求
  - 4xx请求错误——请求含有词法错误或者无法被执行
  - 5xx服务器错误——服务器在处理某个正确请求时发生错误